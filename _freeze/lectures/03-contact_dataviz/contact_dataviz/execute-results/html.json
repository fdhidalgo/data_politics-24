{
  "hash": "d2fe2b71c9100d582b81dde953ac950e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Contact Theory and Data Visualization in `R`\"\nsubtitle: \"Lecture 3\"\ndate: last-modified\nauthor: \n  - name: F. Daniel Hidalgo\n    email: dhidalgo@mit.edu\n    affiliations: MIT\nformat: clean-revealjs\nbibliography: ../data_politics_2024.bib\neditor:\n  render-on-save: true\n---\n\n\n\n# Contact Theory\n\n## What works to reduce prejudice?\n\n-   Inter-group animus or prejudice can be enduring and pervasive\n    -   Ethnic\n    -   Sexual identity\n    -   Age\n    -   Partisanship\n\n. . .\n\n-   How can we reduce prejudice?\n    -   Media campaigns?\n    -   Sensitivity trainings?\n    -   Multicultural education?\n    -   **Inter-group contact**\n\n. . .\n\nMany possible interventions, but most have poor evidence of effectiveness.\n\n## What Types of Interventions are Studied?\n\n::: columns\n::: {.column width=\"50%\"}\n![](images/paluck_intervention_approaches.png)\n:::\n\n::: {.column .fragment width=\"50%\"}\n![](images/paluck_types.png)\n:::\n:::\n\n::: aside\n@paluckPrejudiceReductionProgress2021\n:::\n\n## Inter-group Contact\n\n::: columns\n::: {.column width=\"50%\"}\n![](images/segregation-boston.png) Segregation in the Boston Area (Source: [NY Times](https://www.nytimes.com/interactive/2015/07/08/us/census-race-map.html))\n:::\n\n::: {.column .fragment width=\"50%\"}\n**Contact Theory** (Allport 1954):\n\n-   **Positive contact** between members of different groups can reduce prejudice\n-   **Conditions**:\n    -   Equal status\n    -   Common goals\n    -   Intergroup cooperation\n    -   Support of authorities, law, or custom\n:::\n:::\n\n## Research Design\n\n::: incremental\n-   Most common study ask if attitudes or behavior (less common) is correlated with contact\n    -   Some include demographic or other controls\n    -   Consistent evidence for contact theory\n:::\n\n. . .\n\n::: incremental\n-   Second most common study uses \"laboratory\" experiments\n    -   Controlled (i.e. scripted) settings and random assignment\n    -   Intergroup contact is brief\n    -   Measurement occurs shortly after contact\n    -   *Example:* Pagtolun-an and Clair (1986) had a gay man answer questions about homosexuality for 90 minutes and then post-tested students\n:::\n\n## Field Experiments\n\n::: columns\n::: {.column width=\"50%\"}\n![](images/paluck_settings.png)\n:::\n\n::: {.column .fragment width=\"50%\"}\n-   **Field experiments**:\n    -   Random assignment to treatment and control\n    -   Real-world (less controlled) settings\n    -   Short and Long-term follow-up\n:::\n:::\n\n## Mousa (2020)\n\n::: columns\n::: {.column width=\"50%\"}\n![](images/science.png)\n:::\n\n::: {.column .fragment width=\"50%\"}\n::: incremental\n-   Aftermath of genocide\n\n-   Naturalistic study\n\n-   Measuring behavior and attitudes\n\n-   Random assignment to treatment and control\n\n    -   Ensures potential outcomes are independent of treatment assignment\n    -   Background characteristics (covariates) are **balanced** across treatment and control\n:::\n:::\n:::\n\n## Mousa (2020)\n\n::: columns\n::: {.column width=\"50%\"}\n-   459 players, 42 Christian soccer teams\n\n-   On the field outcomes:\n\n    -   Sign up for mixed team\n    -   Vote for Muslim for Sportsmanship prize\n    -   Train with Muslims\n\n-   Off the field outcomes:\n\n    -   Attend mixed event\n    -   Patronize Muslim events\n    -   Donate to neutral NGO\n:::\n\n::: {.column .fragment width=\"50%\"}\n-   Attitudinal indexes:\n    -   National unity\n    -   Muslim blame\n    -   Muslim neighbor\n:::\n:::\n\n# `ggplot2`\n\n## ggplot2 $\\in$ tidyverse\n\n::: columns\n::: {.column width=\"50%\"}\n![](images/ggplot2-part-of-tidyverse.png)\n:::\n\n::: {.column width=\"50%\"}\n-   **ggplot2** is tidyverse's data visualization package\n-   Structure of the code for plots can be summarized as\n\n``` r\nggplot(data = [dataset], \n       mapping = aes(x = [x-variable], \n                     y = [y-variable])) +\n   geom_xxx() +\n   other options\n```\n:::\n:::\n\n## Midwest data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nmidwest\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 437 × 28\n     PID county  state  area poptotal popdensity popwhite popblack popamerindian\n   <int> <chr>   <chr> <dbl>    <int>      <dbl>    <int>    <int>         <int>\n 1   561 ADAMS   IL    0.052    66090      1271.    63917     1702            98\n 2   562 ALEXAN… IL    0.014    10626       759      7054     3496            19\n 3   563 BOND    IL    0.022    14991       681.    14477      429            35\n 4   564 BOONE   IL    0.017    30806      1812.    29344      127            46\n 5   565 BROWN   IL    0.018     5836       324.     5264      547            14\n 6   566 BUREAU  IL    0.05     35688       714.    35157       50            65\n 7   567 CALHOUN IL    0.017     5322       313.     5298        1             8\n 8   568 CARROLL IL    0.027    16805       622.    16519      111            30\n 9   569 CASS    IL    0.024    13437       560.    13384       16             8\n10   570 CHAMPA… IL    0.058   173025      2983.   146506    16559           331\n# ℹ 427 more rows\n# ℹ 19 more variables: popasian <int>, popother <int>, percwhite <dbl>,\n#   percblack <dbl>, percamerindan <dbl>, percasian <dbl>, percother <dbl>,\n#   popadults <int>, perchsd <dbl>, percollege <dbl>, percprof <dbl>,\n#   poppovertyknown <int>, percpovertyknown <dbl>, percbelowpoverty <dbl>,\n#   percchildbelowpovert <dbl>, percadultpoverty <dbl>,\n#   percelderlypoverty <dbl>, inmetro <int>, category <chr>\n```\n\n\n:::\n:::\n\n\n\n::: aside\nThis section draws heavily on [slides](https://gov50-f23.github.io/slides/03_data_viz_handout.pdf) prepared by Matt Blackwell.\n:::\n\n## Building up a graph in pieces\n\nCreate ggplot object and direct it to the correct data:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- ggplot(data = midwest)\n```\n:::\n\n\n\n**Mapping**: tell ggplot what visual aesthetics correspond to which variables\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- ggplot(data = midwest,\n            mapping = aes(x = popdensity,\n                          y = percbelowpoverty))\n```\n:::\n\n\n\nOther aesthetic mappings: color, shape, size, etc.\n\n## Adding a geom layer\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest, \n      mapping = aes(x = popdensity, y = percbelowpoverty)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-4-1.png){width=576}\n:::\n:::\n\n\n\n## Trying a new geom\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest, \n      mapping = aes(x = popdensity, y = percbelowpoverty)) + \n  geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-5-1.png){width=576}\n:::\n:::\n\n\n\n## Layering geoms is additive\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest, \n      mapping = aes(x = popdensity, y = percbelowpoverty)) + \n  geom_point() + \n  geom_smooth() +\n  scale_x_log10()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-6-1.png){width=576}\n:::\n:::\n\n\n\n## Geoms are functions\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest, \n      mapping = aes(x = popdensity, y = percbelowpoverty)) + \n  geom_point() + \n  geom_smooth(method = \"lm\", se = FALSE) +\n  scale_x_log10()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-7-1.png){width=576}\n:::\n:::\n\n\n\n## Adding Informative Labels\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\np2 <- ggplot(data = midwest, \n      mapping = aes(x = popdensity, y = percbelowpoverty)) + \n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  scale_x_log10() +\n  labs(\n    x = \"Population Density\",\n    y = \"Percent of County Below Poverty Line\", \n    title = \"Poverty and Population Density\",\n    subtitle = \"Among US Midwestern Counties\", \n    caption = \"US Census, 2000\"\n  )\np2\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-8-1.png){width=576}\n:::\n:::\n\n\n\n## Mapping vs setting aesthetics\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest, \n      mapping = aes(x = popdensity, y = percbelowpoverty,\n                    color = \"purple\")) + \n  geom_point() + \n  geom_smooth(method = \"lm\", se = FALSE) +\n  scale_x_log10()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-9-1.png){width=576}\n:::\n:::\n\n\n\n## Mapping always refers to variables\n\nIf passed a value other than a variable name, ggplot will implicitly create a variable with that value (in this case \"purple\" that is constant)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = midwest, \n      mapping = aes(x = popdensity, y = percbelowpoverty,\n                    color = \"purple\")) + \n  geom_point() + \n  geom_smooth() +\n  scale_x_log10()\n```\n:::\n\n\n\n. . .\n\nSet the color outside the `mapping = aes()` format.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest, \n      mapping = aes(x = popdensity, y = percbelowpoverty)) + \n  geom_point(color = \"purple\") + \n  geom_smooth() +\n  scale_x_log10()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-11-1.png){width=576}\n:::\n:::\n\n\n\n## Mapping more aesthetics\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest, \n      mapping = aes(x = popdensity, \n                    y = percbelowpoverty,\n                    color = state, \n                    fill= state)) + \n  geom_point() + \n  geom_smooth() +\n  scale_x_log10()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-12-1.png){width=576}\n:::\n:::\n\n\n\n## Mappings can be done on a per geom basis\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest, \n      mapping = aes(x = popdensity, \n                    y = percbelowpoverty)) + \n  geom_point(mapping = aes(color = state)) + \n  geom_smooth(color = \"black\") +\n  scale_x_log10()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-13-1.png){width=576}\n:::\n:::\n\n\n\n# Histograms and Boxplots\n\n## Histograms\n\n**Histograms** show where there are more or fewer observations of a numeric variable.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest,\n       mapping = aes(x = percbelowpoverty)) +\n  geom_histogram()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-14-1.png){width=576}\n:::\n:::\n\n\n\nSplit up range of variable into bins, count how many are in each bin.\n\ny aesthetic calculated automatically.\n\n## Creating small multiples with facets\n\n**Small multiples**: a series of similar graphs with the same scale/axes to help with comparing different partitions of a dataset.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest,\n       mapping = aes(x = percbelowpoverty)) +\n  geom_histogram() +\n  facet_wrap(~ state)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-15-1.png){width=576}\n:::\n:::\n\n\n\nWe’ll see more of the `~` variable syntax (called a formula).\n\n## Density as alternative to histograms\n\nA kernel density plot is a smoothed version of a histogram and slightly easier to overlay.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest,\n       mapping = aes(x = percbelowpoverty,\n                     fill = state, color = state)) +\n  geom_density(alpha = .3)\n```\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-16-1.png){width=576}\n:::\n:::\n\n\n\n## Boxplots\n\nBoxplots are another way to compare distributions across discrete groups.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nggplot(data = midwest,\n       mapping = aes(x = state,\n                     y = percbelowpoverty)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](contact_dataviz_files/figure-html/unnamed-chunk-17-1.png){width=576}\n:::\n:::\n\n\n\n## Boxplots in `R`\n\n::: incremental\n-   “Box” represents middle 50% of the data.\n    -   25% of the data is below the bottom of the box, 25% is above\n    -   Height of the box is the interquartile range (IQR)\n-   Horizontal line in the box is the median\n    -   50% of the data is below the median, 50% is above\n-   \"Whiskers\" represent either:\n    -   1.5 $\\times$ IQR or max/min of the data, whichever is smaller\n    -   Points beyond the whiskers are considered outliers\n:::\n\n## References\n",
    "supporting": [
      "contact_dataviz_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}